<!-- HTML for the forum
    this is all a little loose and might not work, but will look something like this

-->


<body>


    <div id="forum">
        <!-- Display posts here -->
        <div id="posts"></div>

        <!-- Form to submit new posts -->
        <form id="postForm">
            <input type="text" id="postTitle" placeholder="Title">
            <textarea id="postContent" placeholder="Write your post"></textarea>
            <button type="submit">Submit Post</button>
        </form>

    </div>

</body>


<!-- JavaScript to fetch data and handle interactions -->
<script>
    // Function to fetch and display posts
    async function fetchPosts() {
        const response = await fetch('http://localhost:3000/api/posts')
            .then(response => response.json())
            .then(res => {
                console.log(res.data.posts, 'posts')
                let posts = res.data.posts
                // Get the UL element to populate with data
                const postList = document.getElementById('posts');

                // Loop through the fetched posts and update the DOM
                posts.forEach(post => {
                    const listItem = document.createElement('li');
                    listItem.textContent = post.title;
                    postList.appendChild(listItem);
                });
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });;
        const data = await response.json();

        console.log(data)
        // Add logic to display posts in the #posts div
    }

    // Function to submit a new post
    async function submitPost(title, content) {
        const response = await fetch('http://localhost:3000/api/posts', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ title, content }),
        });

        // Handle the response and update the UI accordingly
    }

    // Event listener for the form submission
    document.getElementById('postForm').addEventListener('submit', (event) => {
        event.preventDefault();
        const postTitle = document.getElementById('postTitle').value;
        const postContent = document.getElementById('postContent').value;
        submitPost(postTitle, postContent);
    });

    // Fetch and display posts when the page loads
    fetchPosts()

</script>
